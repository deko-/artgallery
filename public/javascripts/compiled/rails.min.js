(function(d){function b(l){var k=d('meta[name="csrf-token"]').attr("content");if(k){l.setRequestHeader("X-CSRF-Token",k)}}if("ajaxPrefilter" in d){d.ajaxPrefilter(function(k,m,l){b(l)})}else{d(document).ajaxSend(function(k,l){b(l)})}function c(n,k,m){var l=d.Event(k);n.trigger(l,m);return l.result!==false}function i(n){var p,l,o,k=n.data("type")||(d.ajaxSettings&&d.ajaxSettings.dataType);if(c(n,"ajax:before")){if(n.is("form")){p=n.attr("method");l=n.attr("action");o=n.serializeArray();var m=n.data("ujs:submit-button");if(m){o.push(m);n.data("ujs:submit-button",null)}}else{p=n.data("method");l=n.attr("href");o=null}d.ajax({url:l,type:p||"GET",data:o,dataType:k,beforeSend:function(r,q){if(q.dataType===undefined){r.setRequestHeader("accept","*/*;q=0.5, "+q.accepts.script)}return c(n,"ajax:beforeSend",[r,q])},success:function(r,q,s){n.trigger("ajax:success",[r,q,s])},complete:function(r,q){n.trigger("ajax:complete",[r,q])},error:function(s,q,r){n.trigger("ajax:error",[s,q,r])}})}}function f(o){var l=o.attr("href"),q=o.data("method"),m=d("meta[name=csrf-token]").attr("content"),p=d("meta[name=csrf-param]").attr("content"),n=d('<form method="post" action="'+l+'"></form>'),k='<input name="_method" value="'+q+'" type="hidden" />';if(p!==undefined&&m!==undefined){k+='<input name="'+p+'" value="'+m+'" type="hidden" />'}n.hide().append(k).appendTo("body");n.submit()}function g(k){k.find("input[data-disable-with], button[data-disable-with]").each(function(){var l=d(this),m=l.is("button")?"html":"val";l.data("ujs:enable-with",l[m]());l[m](l.data("disable-with"));l.attr("disabled","disabled")})}function a(k){k.find("input[data-disable-with]:disabled, button[data-disable-with]:disabled").each(function(){var l=d(this),m=l.is("button")?"html":"val";if(l.data("ujs:enable-with")){l[m](l.data("ujs:enable-with"))}l.removeAttr("disabled")})}function h(k){var l=k.data("confirm");return !l||(c(k,"confirm")&&confirm(l))}function e(m,l){var n=false,k=l||"input";m.find(k).each(function(){if(!d(this).val()){n=true}});return n}function j(n,l){var m=false,k=l||"input";n.find(k).each(function(){if(d(this).val()){m=true}});return m}d("a[data-confirm], a[data-method], a[data-remote]").live("click.rails",function(l){var k=d(this);if(!h(k)){return false}if(k.data("remote")!=undefined){i(k);return false}else{if(k.data("method")){f(k);return false}}});d("form").live("submit.rails",function(m){var k=d(this),l=k.data("remote")!=undefined;if(!h(k)){return false}if(e(k,"input[name][required]")){k.trigger("ajax:aborted:required");return !l}if(j(k,"input:file")){return c(k,"ajax:aborted:file")}if(l){i(k);return false}else{setTimeout(function(){g(k)},13)}});d("form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])").live("click.rails",function(){var l=d(this);if(!h(l)){return false}var k=l.attr("name"),m=k?{name:k,value:l.val()}:null;l.closest("form").data("ujs:submit-button",m)});d("form").live("ajax:beforeSend.rails",function(k){if(this==k.target){g(d(this))}});d("form").live("ajax:complete.rails",function(k){if(this==k.target){a(d(this))}})})(jQuery);